---
sidebar_position: 5
---

import { Highlight } from '/src/components/Shared';

# 3.5 Practical Task - Implement interfaces that are integrated with Commercetools

## What is this task about

 The task involves modifying the Backend For Frontend (BFF) logic to enable the transition from Magento to Commercetools.


## What should be done

You are required to integrate logic into the Backend For Frontend (BFF) to accommodate the new platform, Commercetools.
The BFF should incorporate a mechanism for seamless switching between Magento and Commercetools. Additionally,
it needs to support the following components: Product Detail Page (PDP), Product Listing Page (PLP), Cart, and Order functionalities.


## Task

1. Develop a switch mechanism that allows switching from Magento to Commercetools based on parameters. f.e. by env parameters
2. Develop the BFF component that connects to Commercetools and provides information for the Product Detail Page (PDP) in the storefront.
3. Develop the BFF component that connects to Commercetools and provides information for the Product Listing Page (PLP) in the storefront.
4. Develop the BFF component that connects to Commercetools and provides information for the Cart in the storefront.
5. Develop the BFF component that connects to Commercetools and provides information for the Order process in the storefront.

#### NOTES

Examples of operations directly with Commercetools through API using Postman. Please execute these requests to acquaint yourself with the APIs and their corresponding response structures.

#### Commercetools API

### Categories
#### Query categories
##### <Highlight color="#108a8c">GET</Highlight> `{{host}}/{{project-key}}/categories`

### Products
#### Search products by category
##### <Highlight color="#108a8c">GET</Highlight>    `{{host}}/{{project-key}}/product-projections/search?filter=categories.id:"{id}"`

### Cart
#### Create cart
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/carts`

#### Get Cart by id
##### <Highlight color="#108a8c">GET</Highlight> `{{host}}/{{project-key}}/carts/{{cart-id}}`

#### Add Line Item
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/carts/{{cart-id}}`
```jsx title="Request Body"
{
   "version": {{cart-version}},
   "actions": [
      {
         "action" : "addLineItem",
         "productId" : {{ product-id }}, // or sku
         "variantId" : {{ variantId }},
        "quantity": 1
      }
  ]
}
```

#### Remove Line Item
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/carts/{{cart-id}}` |
```jsx title="Request Body"
{
   "version": {{cart-version}},
   "actions": [
      {
         "action" : "removeLineItem",
         "lineItemId" : "{{lineItemId}}"
      }
   ]
}
```

#### Change Line Item Quantity
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/carts/{{cart-id}}`
```jsx title="Request Body"
{
   "version": {{cart-version}},
   "actions": [
      {
         "action" : "changeLineItemQuantity",
         "lineItemId" : "{{lineItemId}}",
         "quantity" : 2
      }
   ]
}
```

#### Set Shipping Address
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/carts/{{cart-id}}`
```jsx title="Request Body"
{
   "version": {{cart-version}},
   "actions": [
      {
         "action" : "setShippingAddress",
         "address" : {
            "key" : "exampleKey",
            "title" : "My Address",
            "salutation" : "Mr.",
            "firstName" : "Example",
            "lastName" : "Person",
            "streetName" : "Example Street",
            "streetNumber" : "4711",
            "additionalStreetInfo" : "Backhouse",
            "postalCode" : "80933",
            "city" : "Exemplary City",
            "region" : "Exemplary Region",
            "country" : "DE",
            "company" : "My Company Name",
            "department" : "Sales",
            "building" : "Hightower 1",
            "apartment" : "247",
            "pOBox" : "2471",
            "phone" : "+49 89 12345678",
            "mobile" : "+49 171 2345678",
            "email" : "email@example.com",
            "fax" : "+49 89 12345679",
            "additionalAddressInfo" : "no additional Info",
            "externalId" : "Information not needed"
         }
      }
   ]
}
```

### Order
#### Create order
##### <Highlight color="#109049">POST</Highlight> `{{host}}/{{project-key}}/orders`
```jsx title="Request Body"
{
   "version": {{cart-version}},
   "actions": [
      {
         "action" : "removeLineItem",
         "lineItemId" : "{{lineItemId}}"
      }
   ]
}
```
